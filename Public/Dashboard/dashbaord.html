<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HealthQuest Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="dashboard.css">
    <script src="https://cdn.jsdelivr.net/npm/jwt-decode@3.1.2/build/jwt-decode.min.js"></script>
</head>
<body>
    <div class="container">
        <aside class="sidebar">
            <div class="user-profile">
                <img src="../../assets/avator.jpeg" alt="User Avatar" class="avatar">
                <h3 class="user-name">John Doe</h3>
                <span class="level-badge user-level">Level 1</span>
            </div>
            <nav class="nav-menu">
                <a href="dashbaord.html" class="nav-item active">
                    <span class="nav-icon">üè†</span>
                    Home
                </a>
                <a href="FoodLog.html" class="nav-item">
                    <span class="nav-icon">üçΩÔ∏è</span>
                    Food Log
                </a>
                <a href="FoodSuggestion.html" class="nav-item">
                    <span class="nav-icon">üí°</span>
                    Food Suggestion
                </a>
                <a href="Posture.html" class="nav-item">
                    <span class="nav-icon">üìä</span>
                    Posture Scan
                </a>
                <a href="Buddies.html" class="nav-item">
                    <span class="nav-icon">üë•</span>
                    Buddies
                </a>
                <a href="../Insights/Insights.html" class="nav-item">
                    <span class="nav-icon">üìà</span>
                    Insights
                </a>
                <a href="../Notifications/Notifications.html" class="nav-item">
                    <span class="nav-icon">üîî</span>
                    Notification
                </a>
                <a href="Settings.html" class="nav-item">
                    <span class="nav-icon">‚öôÔ∏è</span>
                    Settings
                </a>
            </nav>
        </aside>

        <main class="main-content">
            <h1>Dashboard</h1>
            
            <!-- Coin Wallet -->
            <div class="coin-wallet">
                <span class="coin-icon">üí∞</span>
                <span class="coin-balance">0</span>
                <span class="coin-label">Coins</span>
            </div>
            
            <!-- Gamified Header - Level and Rank at Top -->
            <div class="gamified-header">
                <div class="level-progress">
                    <div class="level-info">
                        <h2 class="current-level">Level 1</h2>
                        <span class="xp">0/100 XP</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0%"></div>
                    </div>
                </div>
                <div class="user-stats">
                    <div class="stat-item">
                        <span class="stat-icon">üèÜ</span>
                        <span class="stat-value" data-stat="rank">#42</span>
                        <span class="stat-label">Rank</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-icon">‚≠ê</span>
                        <span class="stat-value" data-stat="level">1</span>
                        <span class="stat-label">Level</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-icon">üíé</span>
                        <span class="stat-value" data-stat="xp">0</span>
                        <span class="stat-label">XP</span>
                    </div>
                </div>
            </div>
            
            <!-- Daily Summary Section -->
            <section class="daily-summary-section">
                <h2>üìä Daily Summary</h2>
                <div class="summary-grid">
                    <div class="summary-card">
                        <h3>Calories</h3>
                        <div class="summary-value" id="calories-display">0</div>
                        <div class="summary-unit">kcal</div>
                        <div class="summary-change positive" id="calories-change">+0%</div>
                    </div>
                    <div class="summary-card">
                        <h3>Protein</h3>
                        <div class="summary-value" id="protein-display">0</div>
                        <div class="summary-unit">g</div>
                        <div class="summary-change positive" id="protein-change">+0%</div>
                    </div>
                    <div class="summary-card">
                        <h3>Steps</h3>
                        <div class="summary-value" id="steps-display">0</div>
                        <div class="summary-unit">steps</div>
                        <div class="summary-change positive" id="steps-change">+0%</div>
                    </div>
                    <div class="summary-card">
                        <h3>Water</h3>
                        <div class="summary-value" id="water-display">0</div>
                        <div class="summary-unit">L</div>
                        <div class="summary-change positive" id="water-change">+0%</div>
                    </div>
                    <div class="summary-card">
                        <h3>Sleep</h3>
                        <div class="summary-value" id="sleep-display">0</div>
                        <div class="summary-unit">hrs</div>
                        <div class="summary-change positive" id="sleep-change">+0%</div>
                    </div>
                    <div class="summary-card">
                        <h3>Posture Score</h3>
                        <div class="summary-value" id="posture-display">88</div>
                        <div class="summary-unit">points</div>
                        <div class="summary-change positive">+22%</div>
                    </div>
                </div>
            </section>

            <!-- Daily Quests Section -->
            <div class="checklist-section">
                <h2>üìã Daily Quests</h2>
                <div class="checklist-grid">
                    <div class="checklist-item" data-quest="water">
                        <div class="quest-info">
                            <span class="quest-icon">üíß</span>
                            <div class="quest-details">
                                <h3>Hydration Master</h3>
                                <p>Log 2L water</p>
                            </div>
                        </div>
                        <div class="quest-reward">
                            <span class="xp-reward">+25 XP</span>
                            <input type="checkbox" class="quest-checkbox" id="water-quest">
                            <label for="water-quest" class="quest-toggle"></label>
                        </div>
                    </div>

                    <div class="checklist-item" data-quest="steps">
                        <div class="quest-info">
                            <span class="quest-icon">üë£</span>
                            <div class="quest-details">
                                <h3>Step Champion</h3>
                                <p>Complete 5K steps</p>
                            </div>
                        </div>
                        <div class="quest-reward">
                            <span class="xp-reward">+50 XP</span>
                            <input type="checkbox" class="quest-checkbox" id="steps-quest">
                            <label for="steps-quest" class="quest-toggle"></label>
                        </div>
                    </div>

                    <div class="checklist-item" data-quest="sleep">
                        <div class="quest-info">
                            <span class="quest-icon">üò¥</span>
                            <div class="quest-details">
                                <h3>Sleep Warrior</h3>
                                <p>Sleep 7+ hours</p>
                            </div>
                        </div>
                        <div class="quest-reward">
                            <span class="xp-reward">+30 XP</span>
                            <input type="checkbox" class="quest-checkbox" id="sleep-quest">
                            <label for="sleep-quest" class="quest-toggle"></label>
                        </div>
                    </div>

                    <div class="checklist-item" data-quest="posture">
                        <div class="quest-info">
                            <span class="quest-icon">üìä</span>
                            <div class="quest-details">
                                <h3>Posture Pro</h3>
                                <p>Complete posture scan</p>
                            </div>
                        </div>
                        <div class="quest-reward">
                            <span class="xp-reward">+40 XP</span>
                            <input type="checkbox" class="quest-checkbox" id="posture-quest">
                            <label for="posture-quest" class="quest-toggle"></label>
                        </div>
                    </div>

                    <div class="checklist-item" data-quest="meal">
                        <div class="quest-info">
                            <span class="quest-icon">üçΩÔ∏è</span>
                            <div class="quest-details">
                                <h3>Nutrition Tracker</h3>
                                <p>Log today's meal</p>
                            </div>
                        </div>
                        <div class="quest-reward">
                            <span class="xp-reward">+20 XP</span>
                            <input type="checkbox" class="quest-checkbox" id="meal-quest">
                            <label for="meal-quest" class="quest-toggle"></label>
                        </div>
                    </div>

                    <div class="checklist-item" data-quest="exercise">
                        <div class="quest-info">
                            <span class="quest-icon">üí™</span>
                            <div class="quest-details">
                                <h3>Fitness Fanatic</h3>
                                <p>30 min workout</p>
                            </div>
                        </div>
                        <div class="quest-reward">
                            <span class="xp-reward">+60 XP</span>
                            <input type="checkbox" class="quest-checkbox" id="exercise-quest">
                            <label for="exercise-quest" class="quest-toggle"></label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Smart Daily Quest Scaling -->
            <section class="smart-quests-section">
                <h2>üéØ Smart Daily Quests</h2>
                <div class="quest-scaling-grid">
                    <div class="quest-item" data-quest="steps">
                        <div class="quest-header">
                            <span class="quest-icon">üë£</span>
                            <div class="quest-info">
                                <h3>Steps</h3>
                                <p>Today's Goal: <span class="current-goal">10,000</span></p>
                            </div>
                        </div>
                        <div class="quest-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 120%"></div>
                            </div>
                            <span class="progress-text">12,000 / 10,000</span>
                        </div>
                        <div class="quest-rewards">
                            <span class="reward-xp">+50 XP</span>
                            <span class="reward-coins">+15 Coins</span>
                            <span class="scaling-notice">üéØ Tomorrow's goal: 20,000</span>
                        </div>
                    </div>

                    <div class="quest-item" data-quest="calories">
                        <div class="quest-header">
                            <span class="quest-icon">üî•</span>
                            <div class="quest-info">
                                <h3>Calories</h3>
                                <p>Today's Goal: <span class="current-goal">2,000</span></p>
                            </div>
                        </div>
                        <div class="quest-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 85%"></div>
                            </div>
                            <span class="progress-text">1,700 / 2,000</span>
                        </div>
                        <div class="quest-rewards">
                            <span class="reward-xp">+30 XP</span>
                            <span class="reward-coins">+0 Coins</span>
                        </div>
                    </div>

                    <div class="quest-item" data-quest="protein">
                        <div class="quest-header">
                            <span class="quest-icon">üí™</span>
                            <div class="quest-info">
                                <h3>Protein</h3>
                                <p>Today's Goal: <span class="current-goal">100g</span></p>
                            </div>
                        </div>
                        <div class="quest-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 95%"></div>
                            </div>
                            <span class="progress-text">95 / 100g</span>
                        </div>
                        <div class="quest-rewards">
                            <span class="reward-xp">+25 XP</span>
                            <span class="reward-coins">+0 Coins</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Mini Challenges Section -->
            <section class="mini-challenges-section">
                <div class="section-header">
                    <h2>üéØ Mini Challenges</h2>
                    <div class="challenge-timer">
                        <span class="timer-icon">‚è≥</span>
                        <span class="timer-text" id="challenge-timer">Refreshes in 2 days</span>
                    </div>
                </div>
                <div class="challenges-grid">
                    <div class="challenge-card" data-challenge="night-walk">
                        <div class="challenge-header">
                            <span class="challenge-icon">üåô</span>
                            <div class="challenge-info">
                                <h3>Night Walk</h3>
                                <p>Walk after 7 PM</p>
                            </div>
                        </div>
                        <div class="challenge-details">
                            <div class="challenge-cost">
                                <span class="cost-icon">ü™ô</span>
                                <span class="cost-amount">15</span>
                            </div>
                            <div class="challenge-reward">
                                <span class="reward-xp">+20 XP</span>
                                <span class="reward-badge">"Moonwalker" Badge</span>
                            </div>
                        </div>
                        <button class="btn btn-primary unlock-btn" data-cost="15">Unlock Challenge</button>
                    </div>

                    <div class="challenge-card" data-challenge="fruit-day">
                        <div class="challenge-header">
                            <span class="challenge-icon">üçé</span>
                            <div class="challenge-info">
                                <h3>Fruit Day</h3>
                                <p>Log 3 fruits today</p>
                            </div>
                        </div>
                        <div class="challenge-details">
                            <div class="challenge-cost">
                                <span class="cost-icon">ü™ô</span>
                                <span class="cost-amount">20</span>
                            </div>
                            <div class="challenge-reward">
                                <span class="reward-xp">+30 XP</span>
                                <span class="reward-badge">Avatar Hat</span>
                            </div>
                        </div>
                        <button class="btn btn-primary unlock-btn" data-cost="20">Unlock Challenge</button>
                    </div>

                    <div class="challenge-card" data-challenge="hydration-hero">
                        <div class="challenge-header">
                            <span class="challenge-icon">üöø</span>
                            <div class="challenge-info">
                                <h3>Hydration Hero</h3>
                                <p>Drink 3L water</p>
                            </div>
                        </div>
                        <div class="challenge-details">
                            <div class="challenge-cost">
                                <span class="cost-icon">ü™ô</span>
                                <span class="cost-amount">25</span>
                            </div>
                            <div class="challenge-reward">
                                <span class="reward-xp">+40 XP</span>
                                <span class="reward-badge">Water Badge + 2x XP</span>
                            </div>
                        </div>
                        <button class="btn btn-primary unlock-btn" data-cost="25">Unlock Challenge</button>
                    </div>
                </div>
            </section>

            <!-- User Titles & Ranks Section -->
            <section class="titles-section">
                <h2>üèÖ Titles & Ranks</h2>
                <div class="titles-grid">
                    <div class="title-card" data-title="step-warrior">
                        <div class="title-header">
                            <span class="title-icon">ü•æ</span>
                            <div class="title-info">
                                <h3>Step Warrior</h3>
                                <p>10 days of 10k+ steps</p>
                            </div>
                        </div>
                        <div class="title-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 60%"></div>
                            </div>
                            <span class="progress-text">6/10 days</span>
                        </div>
                        <div class="title-actions">
                            <span class="title-cost">ü™ô 75</span>
                            <button class="btn btn-secondary unlock-title-btn" data-cost="75">Unlock</button>
                        </div>
                    </div>

                    <div class="title-card" data-title="protein-beast">
                        <div class="title-header">
                            <span class="title-icon">üí™</span>
                            <div class="title-info">
                                <h3>Protein Beast</h3>
                                <p>Avg. 100g protein/day</p>
                            </div>
                        </div>
                        <div class="title-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 80%"></div>
                            </div>
                            <span class="progress-text">80/100g avg</span>
                        </div>
                        <div class="title-actions">
                            <span class="title-cost">ü™ô 100</span>
                            <button class="btn btn-secondary unlock-title-btn" data-cost="100">Unlock</button>
                        </div>
                    </div>

                    <div class="title-card" data-title="streak-legend">
                        <div class="title-header">
                            <span class="title-icon">üî•</span>
                            <div class="title-info">
                                <h3>Streak Legend</h3>
                                <p>14-day perfect activity streak</p>
                            </div>
                        </div>
                        <div class="title-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 35%"></div>
                            </div>
                            <span class="progress-text">5/14 days</span>
                        </div>
                        <div class="title-actions">
                            <span class="title-cost">ü™ô 200</span>
                            <button class="btn btn-secondary unlock-title-btn" data-cost="200">Unlock</button>
                        </div>
                    </div>
                </div>
            </section>

            <div class="activity-section">
                <h2>Recent Activity</h2>
                <div class="activity-list" id="activity-list">
                    <div class="activity-item">
                        <span class="activity-icon">üìä</span>
                        <div class="activity-details">
                            <span class="activity-xp">+50 XP</span>
                            Completed a posture scan
                        </div>
                    </div>
                    <div class="activity-item">
                        <span class="activity-icon">üç≥</span>
                        <div class="activity-details">
                            <span class="activity-xp">+20 XP</span>
                            Logged breakfast
                        </div>
                    </div>
                    <div class="activity-item">
                        <span class="activity-icon">üë£</span>
                        <div class="activity-details">
                            <span class="activity-xp">+30 XP</span>
                            Reached 5,000 steps
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Unlock Modal -->
    <div class="unlock-modal" id="unlock-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">Unlock Challenge</h3>
                <button class="close-btn" id="close-modal">√ó</button>
            </div>
            <div class="modal-body">
                <p id="modal-message">Are you sure you want to unlock this challenge?</p>
                <div class="modal-cost">
                    <span class="cost-icon">ü™ô</span>
                    <span class="cost-amount" id="modal-cost">0</span>
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn btn-secondary" id="cancel-unlock">Cancel</button>
                <button class="btn btn-primary" id="confirm-unlock">Unlock</button>
            </div>
        </div>
    </div>

    <script src="dashboard.js"></script>
    <script>
        // Global Dark Mode Application
        function applyGlobalDarkMode() {
            const isDark = localStorage.getItem('darkMode') === 'true';
            if (isDark) {
                document.body.classList.add('dark-mode');
            }
        }
        
        // Apply dark mode immediately for faster loading
        applyGlobalDarkMode();
    </script>
</body>
</html>